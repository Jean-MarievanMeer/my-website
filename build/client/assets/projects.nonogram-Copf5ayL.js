import{R as F,p as t,a as c,x as P,w as A}from"./chunk-NISHYRIK-CQ3RJ5t9.js";import{F as g,d as y,e as z,g as X,h as G}from"./index-BzCSPyxt.js";import{H as I,e as O,g as R}from"./Hint-BqBrgvgY.js";const Y=e=>t.jsx(g,{icon:e==="disabled"?y:z}),_=({state:e,handleMouseDown:u,handleMouseEnter:a})=>t.jsxs("button",{onMouseDown:()=>u(),onMouseEnter:()=>a(),className:"tile-"+e,children:[" ",Y(e)]}),$=F.memo(_),q=({tiles:e,handleMouseDown:u,handleMouseEnter:a})=>t.jsx("div",{className:"tile-grid",children:e.map((i,o)=>t.jsx("div",{children:i.map((d,s)=>t.jsx($,{state:d,handleMouseDown:()=>u(s,o),handleMouseEnter:()=>a(s,o)},"x"+s+"y"+o))},o))});var j=(e=>(e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right",e))(j||{});function J(){const e=c.useRef(null);function u(o){e.current=o.button}function a(){e.current=null}function i(){return e.current}return{isClicked:()=>i()!==null,clickedButton:()=>i(),handleMouseDown:u,handleMouseUp:()=>a()}}const C=({alignment:e,hints:u,tiles:a})=>t.jsx("div",{className:"hints-"+e,children:u.map((i,o)=>t.jsx(t.Fragment,{children:t.jsx(I,{hint:i,alignment:e,line:O(e,o,a)})}))}),K=()=>{const e=[["confirmed","default","default","default","default"],["default","confirmed","confirmed","default","default"],["confirmed","default","confirmed","confirmed","confirmed"],["confirmed","default","default","confirmed","confirmed"],["default","default","default","default","confirmed"]],[u,a]=P(),i=J(),[o,d]=c.useState(b()),[s,x]=c.useState(()=>[o]),f=c.useRef(null),h=()=>f.current,m=c.useRef(null),p=()=>m.current,w=c.useRef(null),T=()=>t.jsxs("div",{children:[t.jsx("button",{className:"tile-undo",onClick:()=>k(),children:t.jsx(g,{icon:X})}),t.jsx("button",{className:"new-game-button",children:"Start new game"}),t.jsxs("button",{onClick:()=>{navigator.clipboard.writeText(window.location.href),alert("URL gekopieerd! Open de URL op een ander device om daar verder te spelen")},className:"tile-undo",children:[" ",t.jsx(g,{icon:G})," "]})]});return t.jsxs("div",{children:[t.jsxs("div",{className:"main-board",onContextMenu:n=>n.preventDefault(),onMouseDownCapture:i.handleMouseDown,onMouseLeave:M,onMouseUp:M,children:[t.jsx("div",{}),t.jsx(C,{alignment:"vertical",hints:R("vertical",e),tiles:o}),t.jsx(C,{alignment:"horizontal",hints:R("horizontal",e),tiles:o}),t.jsx(q,{tiles:o,handleMouseDown:L,handleMouseEnter:E})]}),t.jsx(T,{})]});function k(){!s||s.length<=1||(s&&d(s[s.length-2]),x(s.slice(0,-1)))}function b(){return S(e)}function S(n){return D(n[0].length,n.length)}function D(n,r){return Array(n).fill(null).map(()=>Array(r).fill("default"))}function v(n,r){if(!i.isClicked()||o[r][n]!==w.current||!(n===h()||r===p()))return;const l=o.map(B=>[...B]);i.clickedButton()===j.Left?l[r][n]=l[r][n]==="confirmed"?"default":"confirmed":i.clickedButton()===j.Right&&(l[r][n]=l[r][n]==="disabled"?"default":"disabled"),d(l)}function L(n,r){w.current=o[r][n],f.current=n,m.current=r,v(n,r)}function E(n,r){h()===null&&p()===null||(h()===n?m.current=null:p()===r&&(f.current=null)),v(n,r)}function M(){f.current=null,m.current=null,i.isClicked()&&U(),i.handleMouseUp()}function U(){const n=[...o],r=[...s||[],n];x(r),H()}function H(){a({tiles:N(o)})}function N(n){return n.map(r=>r.map(l=>l==="default"?0:l==="confirmed"?1:2).join("")).join("-")}},Z=A(function(){return t.jsx("div",{children:t.jsx(K,{})})});export{Z as default};
